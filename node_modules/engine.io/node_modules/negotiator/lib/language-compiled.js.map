{"version":3,"sources":["language.js"],"names":[],"mappings":"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","file":"language-compiled.js","sourcesContent":["/**\n * negotiator\n * Copyright(c) 2012 Isaac Z. Schlueter\n * Copyright(c) 2014 Federico Romero\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = preferredLanguages;\nmodule.exports.preferredLanguages = preferredLanguages;\n\n/**\n * Module variables.\n * @private\n */\n\nvar simpleLanguageRegExp = /^\\s*([^\\s\\-;]+)(?:-([^\\s;]+))?\\s*(?:;(.*))?$/;\n\n/**\n * Parse the Accept-Language header.\n * @private\n */\n\nfunction parseAcceptLanguage(accept) {\n  var accepts = accept.split(',');\n\n  for (var i = 0, j = 0; i < accepts.length; i++) {\n    var langauge = parseLanguage(accepts[i].trim(), i);\n\n    if (langauge) {\n      accepts[j++] = langauge;\n    }\n  }\n\n  // trim accepts\n  accepts.length = j;\n\n  return accepts;\n}\n\n/**\n * Parse a language from the Accept-Language header.\n * @private\n */\n\nfunction parseLanguage(str, i) {\n  var match = simpleLanguageRegExp.exec(str);\n  if (!match) return null;\n\n  var prefix = match[1],\n      suffix = match[2],\n      full = prefix;\n\n  if (suffix) full += \"-\" + suffix;\n\n  var q = 1;\n  if (match[3]) {\n    var params = match[3].split(';')\n    for (var i = 0; i < params.length; i ++) {\n      var p = params[i].split('=');\n      if (p[0] === 'q') q = parseFloat(p[1]);\n    }\n  }\n\n  return {\n    prefix: prefix,\n    suffix: suffix,\n    q: q,\n    i: i,\n    full: full\n  };\n}\n\n/**\n * Get the priority of a language.\n * @private\n */\n\nfunction getLanguagePriority(language, accepted, index) {\n  var priority = {o: -1, q: 0, s: 0};\n\n  for (var i = 0; i < accepted.length; i++) {\n    var spec = specify(language, accepted[i], index);\n\n    if (spec && (priority.s - spec.s || priority.q - spec.q || priority.o - spec.o) < 0) {\n      priority = spec;\n    }\n  }\n\n  return priority;\n}\n\n/**\n * Get the specificity of the language.\n * @private\n */\n\nfunction specify(language, spec, index) {\n  var p = parseLanguage(language)\n  if (!p) return null;\n  var s = 0;\n  if(spec.full.toLowerCase() === p.full.toLowerCase()){\n    s |= 4;\n  } else if (spec.prefix.toLowerCase() === p.full.toLowerCase()) {\n    s |= 2;\n  } else if (spec.full.toLowerCase() === p.prefix.toLowerCase()) {\n    s |= 1;\n  } else if (spec.full !== '*' ) {\n    return null\n  }\n\n  return {\n    i: index,\n    o: spec.i,\n    q: spec.q,\n    s: s\n  }\n};\n\n/**\n * Get the preferred languages from an Accept-Language header.\n * @public\n */\n\nfunction preferredLanguages(accept, provided) {\n  // RFC 2616 sec 14.4: no header = *\n  var accepts = parseAcceptLanguage(accept === undefined ? '*' : accept || '');\n\n  if (!provided) {\n    // sorted list of all languages\n    return accepts\n      .filter(isQuality)\n      .sort(compareSpecs)\n      .map(getFullLanguage);\n  }\n\n  var priorities = provided.map(function getPriority(type, index) {\n    return getLanguagePriority(type, accepts, index);\n  });\n\n  // sorted list of accepted languages\n  return priorities.filter(isQuality).sort(compareSpecs).map(function getLanguage(priority) {\n    return provided[priorities.indexOf(priority)];\n  });\n}\n\n/**\n * Compare two specs.\n * @private\n */\n\nfunction compareSpecs(a, b) {\n  return (b.q - a.q) || (b.s - a.s) || (a.o - b.o) || (a.i - b.i) || 0;\n}\n\n/**\n * Get full language string.\n * @private\n */\n\nfunction getFullLanguage(spec) {\n  return spec.full;\n}\n\n/**\n * Check if a spec has any quality.\n * @private\n */\n\nfunction isQuality(spec) {\n  return spec.q > 0;\n}\n"]}